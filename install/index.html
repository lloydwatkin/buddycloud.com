<!doctype html>
<html>
  <head>
  <meta charset="utf-8">
  <title>buddycloud</title>

  <link href="//fonts.googleapis.com/css?family=Nunito:400" media="screen" rel="stylesheet" type="text/css" />
  <link href="../css/all.css" media="screen" rel="stylesheet" type="text/css" />
</head>
  
  <body>
      <div class="fixedHeader" style="display: none">
  <div class="container"></div>
</div>

<!-- first section (header) -->
<section id="home" class="primarySection">
  <div class="container">
    <header class="clearfix">
      <h1><a href="/">buddycloud</a></h1>

      <nav>
        <a href="/install">install</a>
        <a href="/architecture">architecture</a>
        <a href="/api">api</a>
        <a href="http://blog.buddycloud.com" target="_blank">blog</a>
        <a href="/contact">contact</a>
      </nav>
    </header>
  </div>
</section>
<!-- end first section (header) -->

  
  <section class="page primarySection">
    <div class="container">
      <h2 id="install-requirements">Install Requirements</h2>

<ul>
  <li>a server with an internet routable IP address (other <a title="wikilink" href="buddycloud%20hosting%20options">buddycloud
hosting options</a>)</li>
  <li>a domain name (the instructions assume EXAMPLE.COM)</li>
  <li>the ability to edit your DNS</li>
  <li>Ubuntu = 12.04 (LTS)</li>
</ul>

<h2 id="getting-help">Getting help</h2>

<p>Please ask if you get stuck</p>

<ul>
  <li>chatroom: <a href="https://jappix.com/?r=seehaus@channels.buddycloud.com">https://jappix.com/?r=seehaus@channels.buddycloud.com</a></li>
  <li>mailing list:
<a href="https://groups.google.com/forum/">https://groups.google.com/forum/</a>#!forum/buddycloud-dev</li>
  <li><a title="wikilink" href="How%20to%20report%20bugs">How to report bugs</a></li>
</ul>

<h2 id="buddycloud-dns">buddycloud DNS</h2>

<p><span style="color:green">Estimated time: <strong>10 mins</strong></span></p>

<h3 id="aim">Aim</h3>

<ul>
  <li>website for buddycloud channels: <a href="http://buddycloud.EXAMPLE.COM">http://buddycloud.EXAMPLE.COM</a></li>
  <li>server running buddycloud: buddycloud.EXAMPLE.COM</li>
</ul>

<h3 id="configure">Configure</h3>

<p>This install will setup a buddycloud webclient at
<a href="http://buddycloud.EXAMPLE.COM">http://buddycloud.EXAMPLE.COM</a></p>

<p>Log into your registrar or edit your DNS zone file (at Godaddy this is
called the DNS Manager). In this example we use 1.2.3.4 as your server
address. Creating a <a href="https://support.google.com/a/bin/topic.py?hl=en&amp;topic=1409901">TXT
record</a>.</p>

<pre class="highlight text">
buddycloud.EXAMPLE.COM.                    IN A            1.2.3.4 # SRV records must point to A records
_xmpp-server._tcp.EXAMPLE.COM.             IN SRV 5 0 5269 buddycloud.EXAMPLE.COM. # XMPP Server
_xmpp-client._tcp.EXAMPLE.COM.             IN SRV 5 0 5222 buddycloud.EXAMPLE.COM. # XMPP client connections
_xmpp-server._tcp.anon.EXAMPLE.COM.        IN SRV 5 0 5269 buddycloud.EXAMPLE.COM. # XMPP Server anonymous connections
_xmpp-client._tcp.anon.EXAMPLE.COM.        IN SRV 5 0 5222 buddycloud.EXAMPLE.COM. # XMPP anonymous client connections
_xmpp-server._tcp.media.EXAMPLE.COM.       IN SRV 5 0 5269 buddycloud.EXAMPLE.COM. # Media Server XMPP component
_xmpp-server._tcp.buddycloud.EXAMPLE.COM.  IN SRV 5 0 5269 buddycloud.EXAMPLE.COM. # buddycloud Server XMPP component
_buddycloud-api._tcp.EXAMPLE.COM.          IN TXT &quot;v=1.0&quot; &quot;host=buddycloud.EXAMPLE.COM&quot; &quot;protocol=https&quot; &quot;path=/api&quot; &quot;port=443&quot; # HTTP API
</pre>
<h3 id="test">Test</h3>

<p>Test your DNS on <a href="http://protocol.buddycloud.com/EXAMPLE.COM">http://protocol.buddycloud.com/EXAMPLE.COM</a></p>

<p>(replace <code>EXAMPLE.COM</code> by your actual domain)</p>

<p>The following tests must pass:</p>

<ul>
  <li><code>xmpp_server_srv_lookup</code></li>
  <li><code>xmpp_server_anon_srv_lookup</code></li>
  <li><code>xmpp_client_srv_lookup</code></li>
  <li><code>xmpp_client_anon_srv_lookup</code></li>
  <li><code>xmpp_server_a_lookup</code></li>
</ul>

<h2 id="firewall-setup">Firewall Setup</h2>

<p><span style="color:green">Estimated time: <strong>2 mins</strong></span></p>

<p>Double check your firewall rules. They should look something like this:</p>

<pre class="highlight shell"><span class="c"># inbound web, server to server and outbound server to server</span>
iptables -A INPUT  -m state --state NEW -s 0.0.0.0/0 -d &lt;your server address&gt; -p tcp --dport 80   -j ACCEPT 
iptables -A INPUT  -m state --state NEW -s 0.0.0.0/0 -d &lt;your server address&gt; -p tcp --dport 443  -j ACCEPT 
iptables -A INPUT  -m state --state NEW -s 0.0.0.0/0 -d &lt;your server address&gt; -p tcp --dport 5269 -j ACCEPT
iptables -A OUTPUT -m state --state NEW -s &lt;your server address&gt; -d 0.0.0.0/0 -p tcp --dport 5269 -j ACCEPT 
</pre>
<h2 id="prosody-setup">Prosody Setup</h2>

<p><span style="color:green">Estimated time: <strong>10 mins</strong></span></p>

<ul>
  <li>alternative: <a title="wikilink" href="Installing%20buddycloud%20on%20ejabberd">Installing buddycloud on
ejabberd</a></li>
  <li>alternative: <a href="http://prosody.im/doc/install">official Prosody install
guide</a> (good for older distributions)</li>
  <li>alternative: Prosody with <a title="wikilink" href="LDAP%20authentication">LDAP
authentication</a></li>
  <li>alternative: <a title="wikilink" href="Installing%20buddycloud%20on%20openfire">Installing buddycloud on
openfire</a></li>
</ul>

<h3 id="install">Install</h3>

<pre class="highlight shell">apt-get install prosody lua-zlib liblua5.1-cyrussasl0
</pre>
<p>You might need to tell where those Prosody dependencies are. If that's
the case, you can do the following:</p>

<pre class="highlight shell"><span class="nb">echo </span>deb http://packages.prosody.im/debian <span class="k">$(</span>lsb_release -sc<span class="k">)</span> main | sudo tee -a /etc/apt/sources.list
wget http://prosody.im/files/prosody-debian-packages.key -O- | sudo apt-key add -
sudo apt-get update
</pre>
<p>More information on what's you'd be doing on the steps above here:
<a href="http://prosody.im/download/package_repository#debianubuntu">http://prosody.im/download/package_repository#debianubuntu</a></p>

<h3 id="configure-prosody">Configure Prosody</h3>

<p>Edit <code>/etc/prosody/prosody.cfg.lua</code>:</p>

<pre class="highlight lua"><span class="n">modules_enabled</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;</span><span class="s">saslauth&quot;</span><span class="p">;</span>           <span class="c1">-- Authentication for clients and servers. Recommended if you want to log in.</span>
  <span class="s2">&quot;</span><span class="s">tls&quot;</span><span class="p">;</span>                <span class="c1">-- Add support for secure TLS on c2s/s2s connections</span>
  <span class="s2">&quot;</span><span class="s">dialback&quot;</span><span class="p">;</span>           <span class="c1">-- s2s dialback support</span>
  <span class="s2">&quot;</span><span class="s">disco&quot;</span><span class="p">;</span>              <span class="c1">-- Service discovery</span>
  <span class="s2">&quot;</span><span class="s">time&quot;</span><span class="p">;</span>               <span class="c1">-- Let others know the time here on this server</span>
  <span class="s2">&quot;</span><span class="s">ping&quot;</span><span class="p">;</span>               <span class="c1">-- Replies to XMPP pings with pongs</span>
  <span class="s2">&quot;</span><span class="s">posix&quot;</span><span class="p">;</span>              <span class="c1">-- Do posixy things</span>
  <span class="s2">&quot;</span><span class="s">register&quot;</span><span class="p">;</span>           <span class="c1">-- Allow users to register on this server using a client and change passwords</span>
  <span class="s2">&quot;</span><span class="s">watchregistrations&quot;</span><span class="p">;</span> <span class="c1">-- Alert admins of registrations (check &quot;admins&quot; option below too)</span>
  <span class="s2">&quot;</span><span class="s">compression&quot;</span><span class="p">;</span>        <span class="c1">-- Enable mod_compression</span>
<span class="p">};</span>

<span class="n">storage</span>                 <span class="o">=</span> <span class="s2">&quot;</span><span class="s">internal&quot;</span>
<span class="n">admins</span>                  <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;</span><span class="s">your-username@EXAMPLE.COM&quot;</span> <span class="p">}</span>  <span class="c1">-- who receives registration alerts</span>
<span class="n">pidfile</span>                 <span class="o">=</span> <span class="s2">&quot;</span><span class="s">/var/run/prosody/prosody.pid&quot;</span>
<span class="n">log</span>                     <span class="o">=</span> <span class="p">{{</span> <span class="n">levels</span> <span class="o">=</span> <span class="p">{</span> <span class="n">min</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">error&quot;</span> <span class="p">},</span> <span class="n">to</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">file&quot;</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">/var/log/prosody/prosody.err&quot;</span> <span class="p">};</span>
                           <span class="p">{</span> <span class="n">levels</span> <span class="o">=</span> <span class="p">{</span> <span class="n">min</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">info&quot;</span>  <span class="p">},</span> <span class="n">to</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">file&quot;</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">/var/log/prosody/prosody.log&quot;</span> <span class="p">};}</span>
<span class="n">registration_whitelist</span>      <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;</span><span class="s">127.0.0.1&quot;</span> <span class="p">}</span>
<span class="n">whitelist_registration_only</span> <span class="o">=</span> <span class="kc">true</span>


<span class="n">VirtualHost</span> <span class="s2">&quot;</span><span class="s">EXAMPLE.COM&quot;</span>
  <span class="n">authentication</span>        <span class="o">=</span> <span class="s2">&quot;</span><span class="s">internal_hashed&quot;</span>
  <span class="n">allow_registration</span>    <span class="o">=</span> <span class="kc">true</span> 
  <span class="n">anonymous_login</span>       <span class="o">=</span> <span class="kc">false</span>
  <span class="n">ssl</span>                   <span class="o">=</span> <span class="p">{</span>         <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">/etc/apache2/certs/EXAMPLE.COM.key&quot;</span><span class="p">;</span>
                            <span class="n">certificate</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">/etc/apache2/certs/EXAMPLE.COM.pem&quot;</span> <span class="p">}</span>

<span class="c1">-- for non-logged in browsing of open channels.</span>
<span class="n">VirtualHost</span> <span class="s2">&quot;</span><span class="s">anon.EXAMPLE.COM&quot;</span>
  <span class="n">authentication</span>        <span class="o">=</span> <span class="s2">&quot;</span><span class="s">anonymous&quot;</span>
  <span class="n">allow_registration</span>    <span class="o">=</span> <span class="kc">false</span>
  <span class="n">anonymous_login</span>       <span class="o">=</span> <span class="kc">true</span>

<span class="c1">-- buddycloud Channel Server XMPP component configuration.</span>
<span class="n">Component</span> <span class="s2">&quot;</span><span class="s">buddycloud.EXAMPLE.COM&quot;</span>
  <span class="n">component_secret</span>      <span class="o">=</span> <span class="s2">&quot;</span><span class="s">tellnoone&quot;</span>

<span class="c1">-- buddycloud Media Server XMPP component configuration.</span>
<span class="n">Component</span> <span class="s2">&quot;</span><span class="s">media.EXAMPLE.COM&quot;</span>
  <span class="n">component_secret</span>      <span class="o">=</span> <span class="s2">&quot;</span><span class="s">tellnoone&quot;</span>

<span class="c1">-- buddycloud Pusher Server XMPP component configuration.</span>
<span class="n">Component</span> <span class="s2">&quot;</span><span class="s">pusher.EXAMPLE.COM&quot;</span>
  <span class="n">component_secret</span>      <span class="o">=</span> <span class="s2">&quot;</span><span class="s">tellnoone&quot;</span>
</pre>
<h3 id="restart-prosody">Restart Prosody</h3>

<pre class="highlight shell">/etc/init.d/prosody restart
</pre>
<h3 id="test-1">Test</h3>

<p>Check your server is visible on
<a href="http://protocol.buddycloud.com/EXAMPLE.COM">http://protocol.buddycloud.com/EXAMPLE.COM</a></p>

<p>(replace <code>EXAMPLE.COM</code> by your actual domain)</p>

<p>Besides the previous 5 SRV and A record lookup tests, the following test
must pass as well:</p>

<ul>
  <li><code>xmpp_server_connection</code></li>
</ul>

<h3 id="debug">Debug</h3>

<pre class="highlight shell">tail -F /var/log/prosody/prosody.err <span class="se">\</span>
        /var/log/prosody/prosody.log
</pre>
<h2 id="buddycloud-server">buddycloud Server</h2>

<p><span style="color:green">Estimated time: <strong>5 mins</strong></span></p>

<ul>
  <li>Alternative: <a title="wikilink" href="Install%20Java%20channel%20server">Install Java channel
server</a></li>
  <li>Alternative: <a title="wikilink" href="Install%20node.js%20channel%20server">Install node.js channel
server</a> (out of support)</li>
</ul>

<h3 id="install-1">Install</h3>

<pre class="highlight shell"><span class="c"># install dependencies</span>
apt-get install postgresql postgresql-client postgresql-contrib openjdk-6-jre
<span class="c"># Download package from http://downloads.buddycloud.com/packages/debian/nightly/buddycloud-server-java/</span>
dpkg -i buddycloud-server-java<span class="k">*</span>.deb
</pre>
<h3 id="configure-server">Configure server</h3>

<p>Edit <code>/etc/buddycloud-server-java/configuration.properties</code>.</p>

<ul>
  <li>change EXAMPLE.COM to match your domain</li>
  <li>double check the database connection strings</li>
</ul>

<h3 id="start-server">Start server</h3>

<pre class="highlight shell">/etc/init.d/buddycloud-server-java start
</pre>
<h3 id="test-2">Test</h3>

<p>Check the buddycloud server is discoverable using
<a href="http://protocol.buddycloud.com">http://protocol.buddycloud.com</a> (should pass <code>buddycloud_server_disco</code>
test)</p>

<h3 id="debug-1">Debug</h3>

<p>check logs</p>

<pre class="highlight shell">tail -F /var/log/buddycloud-server-java/log 
</pre>
<p>Test the database is installed (password is in
<code>/etc/buddycloud-server-java/configuration.properties</code>)</p>

<pre class="highlight shell">psql -h 127.0.0.1 --username buddycloudserver -d buddycloudserver -c <span class="s2">&quot;select * from nodes;&quot;</span>
node
------
<span class="o">(</span>0 rows<span class="o">)</span>
<span class="c"># this means that your buddycloud server database schema been installed successfully.</span>
</pre>
<h2 id="buddycloud-api-server">buddycloud API Server</h2>

<p><span style="color:green">Estimated time: <strong>6 mins</strong></span></p>

<ul>
  <li>Alternative: <a title="wikilink" href="Install%20from%20source">Install from source</a></li>
</ul>

<p><em>Note: SSL and API requests: Chrome and Firefox will <strong>not</strong> work with
self signed certificates when used for API calls. Ordinarily you would
receive a certificate warning. But for API requests, this does not
happen and requests are silently drop.</em> You have two options:</p>

<ul>
  <li>run without SSL on your API server, or</li>
  <li>get a signed certificate</li>
</ul>

<h3 id="install-2">Install</h3>

<pre class="highlight shell">apt-get install software-properties-common python-software-properties; <span class="c">#needed for PPA access</span>
add-apt-repository ppa:chris-lea/node.js-legacy <span class="c"># to retrieve the correct nodejs version</span>
apt-get update
apt-get install nodejs apache2 apache2.2-common

<span class="c"># ensure you have the correct modules enabled in Apache</span>
a2enmod rewrite proxy_http ssl headers expires deflate
service apache2 reload
<span class="c"># Download from http://downloads.buddycloud.com/packages/debian/nightly/buddycloud-http-api/</span>
dpkg -i buddycloud-http-api<span class="k">*</span>.deb; 
</pre>
<h3 id="configure-server-1">Configure Server</h3>

<p>Edit <code>/etc/buddycloud-http-api/config.js</code> to use your domain.</p>

<h3 id="restart-server">Restart Server</h3>

<pre class="highlight shell">/etc/init.d/buddycloud-http-api start
</pre>
<h3 id="add-site-to-apache">Add site to Apache</h3>

<p>We recommend the usage of a HTTP server in order to make the API
publicly available. As we are using Apache to serve the webclient, we
use the same site to redirect requests to the API. Thus, if you run the
webclient from EXAMPLE.com, the API will be run from EXAMPLE.com/api.</p>

<p>Please refer to <a title="wikilink" href="buddycloud%20Apache%20virtual%20host%20setup">buddycloud Apache virtual host
setup</a> for site setup,
then</p>

<pre class="highlight shell">a2ensite buddycloud-apache-virtual-host
/etc/init.d/apache2 reload
</pre>
<h3 id="test-3">Test</h3>

<p>Check your buddycloud API server is discoverable on
<a href="http://protocol.buddycloud.com/EXAMPLE.COM">http://protocol.buddycloud.com/EXAMPLE.COM</a></p>

<p>(replace EXAMPLE.COM by your actual domain)</p>

<p>The following tests must pass:</p>

<ul>
  <li><code>api_server_lookup</code></li>
  <li><code>api_server_connection</code></li>
</ul>

<h3 id="debug-2">Debug</h3>

<pre class="highlight shell">node --version <span class="c"># The buddycloud API requires nodejs 0.8.*</span>
tail -F /var/log/buddycloud-http-api/buddycloud-http-api.log
</pre>
<h2 id="buddycloud-webclient">buddycloud Webclient</h2>

<p><span style="color:green">Estimated time: <strong>5 mins</strong></span></p>

<ul>
  <li>Alternative: <a title="wikilink" href="buddycloud%20Apache%20virtual%20host%20setup">buddycloud Apache virtual host
setup</a></li>
  <li>Alternative: <a title="wikilink" href="buddycloud%20nginx%20setup">buddycloud nginx
setup</a></li>
  <li>Alternative: <a title="wikilink" href="buddycloud%20lighttpd%20setup">buddycloud lighttpd
setup</a></li>
  <li>Alternative: <a title="wikilink" href="buddycloud%20SSL%20setup">buddycloud SSL setup</a></li>
</ul>

<h3 id="install-3">Install</h3>

<pre class="highlight shell"><span class="c"># Download from http://downloads.buddycloud.com/packages/debian/releases/buddycloud-webclient/ </span>
dpkg -i buddycloud-webclient<span class="k">*</span>.deb;
</pre>
<h3 id="configure-1">Configure</h3>

<pre class="highlight shell">vim /etc/apache2/sites-available/buddycloud-apache-virtual-host
cp /usr/share/buddycloud-webclient/config.js.example /usr/share/buddycloud-webclient/config.js
vim /usr/share/buddycloud-webclient/config.js
a2ensite buddycloud-apache-virtual-host
service apache2 reload
</pre>
<h3 id="test-4">Test</h3>

<ul>
  <li><a href="https://www.ssllabs.com/ssltest/index.html">check your SSL setup</a></li>
  <li>open <code>https://EXAMPLE.COM/</code> in your browser: you should see the
login screen</li>
  <li>open <code>https://EXAMPLE.COM/team@topics.buddycloud.org</code> in your
browser: you should see an open channel displayed</li>
</ul>

<h3 id="debug-3">Debug</h3>

<pre class="highlight shell">tail -F /var/log/apache2/EXAMPLE.COM-error.log <span class="se">\ </span>
        /var/log/apache2/EXAMPLE.COM-error.log <span class="se">\</span>
        /var/log/apache2/api.EXAMPLE.COM-error.log <span class="se">\</span>
        /var/log/apache2/api.EXAMPLE.COM-error.log
</pre>
<h2 id="buddycloud-pusher">buddycloud Pusher</h2>

<p><span style="color:green">Estimated time: <strong>5 mins</strong></span></p>

<h3 id="install-4">Install</h3>

<pre class="highlight shell"><span class="c"># Download from http://downloads.buddycloud.com/packages/debian/ </span>
wget http://downloads.buddycloud.com/packages/debian/nightly/buddycloud-pusher/buddycloud-pusher-<span class="nv">$LATEST</span>/buddycloud-pusher_<span class="nv">$LATEST_all</span>.deb
<span class="c"># Install it with dpkg</span>
dpkg -i buddycloud-pusher_<span class="nv">$LATEST_all</span>.deb
</pre>
<h3 id="configure-2">Configure</h3>

<p>Check your Pusher component is in Prosody <code>/etc/prosody/prosody.cfg.lua</code></p>

<pre class="highlight lua"><span class="n">Component</span> <span class="s2">&quot;</span><span class="s">pusher.EXAMPLE.COM&quot;</span>
       <span class="n">component_secret</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">tellnoone&quot;</span>
</pre>
<p>Change XMPP settings in the Pusher
<code>/usr/share/buddycloud-pusher/configuration.properties</code></p>

<pre class="highlight java"><span class="n">xmpp</span><span class="o">.</span><span class="na">subdomain</span><span class="o">=</span><span class="n">pusher</span><span class="o">.</span><span class="na">EXAMPLE</span><span class="o">.</span><span class="na">COM</span>
<span class="n">xmpp</span><span class="o">.</span><span class="na">secretkey</span><span class="o">=</span><span class="n">tellnoone</span>
</pre>
<p>Add the Pusher to the API in <code>/etc/buddycloud-http-api/config.js</code></p>

<pre class="highlight lua"><span class="n">pusherComponent</span><span class="p">:</span> <span class="s1">&#39;</span><span class="s">pusher.EXAMPLE.COM&#39;</span>
</pre>
<p>Change SMTP settings in the pusher
<code>/usr/share/buddycloud-pusher/configuration.properties</code></p>

<pre class="highlight shell"><span class="c"># Use STMP auth</span>
mail.smtp.auth<span class="o">=</span><span class="nb">true</span>
<span class="c"># Enable start TLS</span>
mail.smtp.starttls.enable<span class="o">=</span><span class="nb">true</span>
<span class="c"># SMTP host</span>
mail.smtp.host<span class="o">=</span>smtp.example.com
<span class="c"># SMTP port</span>
mail.smtp.port<span class="o">=</span>587
<span class="c"># SMTP login user</span>
mail.username<span class="o">=</span>admin@pusher.buddycloud.com
<span class="c"># SMTP login password</span>
mail.password<span class="o">=</span>password
</pre>
<p>Create a GCM project and get an API key as per
<code>http://developer.android.com/google/gcm/gs.html#create-proj</code></p>

<p>Change GCM settings in the pusher
<code>/usr/share/buddycloud-pusher/configuration.properties</code></p>

<pre class="highlight shell"><span class="c"># GCM project id </span>
gcm.google_project_id<span class="o">=</span>
<span class="c"># GCM API key </span>
gcm.api_key<span class="o">=</span>
</pre>
<h3 id="restart">Restart</h3>

<pre class="highlight shell">/etc/init.d/buddycloud-pusher restart
/etc/init.d/buddycloud-http-api restart
</pre>
<h3 id="test-5">Test</h3>

<ul>
  <li>Enable and configure push notifications in the webclient (or via the
[<a href="https://buddycloud.org/wiki/buddycloud_HTTP_API">https://buddycloud.org/wiki/buddycloud_HTTP_API</a>#.2Fnotification_settings
Pusher API])</li>
  <li>After a new post in your channel, for instance, you should get an
email and/or GCM notification.</li>
</ul>

<h3 id="debug-4">Debug</h3>

<pre class="highlight shell">tail -F /usr/share/buddycloud-pusher/logs/log
</pre>
<h2 id="final-steps">Final steps</h2>

<p>You are done!</p>

<p>Log-into your buddycloud node at <a href="http://buddycloud.EXAMPLE.COM/">http://buddycloud.EXAMPLE.COM/</a> and
follow your first channels.</p>

<h2 id="sharing-debug-info">Sharing debug info</h2>

<p>The following commands will generate a file called
<code>/tmp/buddycloud-debug.txt</code> to <a href="http://pastebin.com/">Pastebin</a>.</p>

<p>When you have run the commands, please share the link in the <a href="https://jappix.com/?r=seehaus@channels.buddycloud.com">buddycloud
chat room</a> or on
the
[<a href="https://groups.google.com/forum/?fromgroups">https://groups.google.com/forum/?fromgroups</a>#!forum/buddycloud-dev
buddycloud-dev mailing list].</p>

<pre class="highlight shell"><span class="c"># buddycloud related configuration files</span>
sudo cat /etc/prosody/prosody.cfg.lua <span class="se">\</span>
         /etc/postgresql/9.1/main/pg_hba.conf <span class="se">\</span>
         /opt/buddycloud-server-java/environment.properties <span class="se">\ </span>
         /etc/init.d/buddycloud-server-java <span class="se">\ </span>
         /var/www/&lt;your-domain-name&gt;/config.js <span class="se">\ </span>
         /etc/apache2/sites-enabled/&lt;your-domain-name&gt;  &gt;&gt; /tmp/buddycloud.debug.txt

<span class="c"># network </span>
ip addr  show &gt;&gt; /tmp/buddycloud-debug.txt
ip route show &gt;&gt; /tmp/buddycloud-debug.txt

<span class="c"># what is running</span>
ps -efww &gt;&gt; /tmp/buddycloud-debug.txt

<span class="c"># what&#39;s listening</span>
sudo netstat -plutn | grep LISTEN &gt;&gt; /tmp/buddycloud-debug.txt

<span class="c"># what&#39;s stopping things from listening</span>
sudo iptables -vnL INPUT &gt;&gt; /tmp/buddycloud-debug.txt
sudo iptables -vnL OUTPUT &gt;&gt; /tmp/buddycloud-debug.txt

<span class="c"># the related log files</span>
sudo tail -n 200 /var/log/apache2/&lt;your-domain-name&gt;-access.log <span class="se">\</span>
                 /var/log/apache2/&lt;your-domain-name&gt;-error.log <span class="se">\</span>
                 /var/log/prosody/prosody.log <span class="se">\</span>
                 /var/log/prosody/prosody.err <span class="se">\</span>
                 /var/log/buddycloud-server.log <span class="se">\</span>
                 /var/log/postgresql/postgresql-9.1-main.log &gt;&gt; /tmp/buddycloud-debug.log 

<span class="c"># Edit the file and remove any passwords.</span>
sudo edit /tmp/buddycloud-debug.txt

<span class="c"># To automatically upload the file:</span>
sudo apt-get install pastebinit
sudo cat /tmp/buddycloud-debug.txt | pastebinit
</pre>
    </div>
  </section>


    <footer id="contact" class="waypoint" data-previous="friends-nav" data-current="contact-nav">
  <div class="container grid-3 clearfix">

    <div class="grid-1">
      <ul>
        <li><a href="http://blog.buddycloud.com" target="_blank">Blog</a></li>
        <li><a href="http://blog.buddycloud.com/press" target="_blank">Press</a></li>
        <li><a href="https://buddycloud.org/wiki/Main_Page" target="_blank">Dev-wiki</a></li>
        <li><a href="https://github.com/buddycloud" target="_blank">GitHub</a></li>
        <li><a href="https://twitter.com/buddycloud" target="_blank">Twitter</a></li>
        <li><a href="http://www.facebook.com/and.the.future.is.buddycloud" target="_blank">Facebook</a></li>
      </ul>
    </div>

    <div class="grid-1">
      <ul>
        <li><a href="https://plus.google.com/communities/106778959637011685198" target="_blank">Google+</a></li>
        <li><a href="https://demo.buddycloud.org/team@topics.buddycloud.org" target="_blank">bc team channel</a></li>
        <li><a href="http://www.youtube.com/user/buddycloudGuy" target="_blank">YouTube</a></li>
        <li><a href="https://groups.google.com/forum/?fromgroups#!forum/buddycloud-dev" target="_blank">dev mailing list</a></li>
        <li><a href="http://buddycloud.spreadshirt.net/" target="_blank">t-shirts</a></li>
        <li><a href="http://www.google.com/calendar/embed?src=imaginator.com_vnb63o9j7c780f0e9uqv1l0a9c%40group.calendar.google.com&ctz=Europe/Berlin">Events Calendar</a>(<a href="http://www.google.com/calendar/ical/imaginator.com_vnb63o9j7c780f0e9uqv1l0a9c%40group.calendar.google.com/public/basic.ics">iCal feed</a>)</li>
      </ul>
    </div>

    <div class="grid-1 last">
      <span class="phone"><a href="tel:+14158580202">+1 415-858-0202</a></span>
      <span class="email"><a href="mailto:donna.smith@buddycloud.com">donna.smith@buddycloud.com</a></span>
    </div>
  </div>

  <div class="container clearfix">
    <div class="design">
      Made with love and a text-editor | 2013
    </div>
  </div>
</footer>
    <script>
  // Disabled while in development
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1075750-2']);
  _gaq.push(['_setDomainName', 'buddycloud.com']);
  _gaq.push(['_trackPageview']);

  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=true;
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script><script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
<script src="../js/all.js" type="text/javascript"></script>

  </body>
</html>